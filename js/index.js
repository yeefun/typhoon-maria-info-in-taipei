"use strict";var typhoon_origin=void 0,typhoon_data=void 0,i=void 0,buttonPage_total=void 0,buttonPage=void 0,buttonPage_add=4,everyPage_results=20,current_page=void 0,click_page=void 0;function initial_selOpt(){var a=[];typhoon_data.forEach(function(t,e){a[e]=t.CaseLocationDistrict}),a.filter(function(t,e,a){return a.indexOf(t)===e}).forEach(function(t){var e="<li>"+t+"</li>";$(".select__option.dist").append(e)});var n=[];typhoon_data.forEach(function(t,e){n[e]=t.PName}),n.filter(function(t,e,a){return a.indexOf(t)===e}).forEach(function(t){var e="<li>"+t+"</li>";$(".select__option.type").append(e)})}function clickPage_result(){for($(".search-result").empty(),i=(click_page-1)*everyPage_results;i<(click_page*everyPage_results>typhoon_data.length?typhoon_data.length:click_page*everyPage_results);i++){var t='\n      <div>\n        <article>\n          <section class="search-result__time">\n            <div class="title">發生時間：</div>\n            <p>'+typhoon_data[i].CaseTime.replace("T"," ")+'</p>\n          </section>\n          <section class="search-result__dist">\n            <div class="title">受災地區：</div>\n            <p>'+typhoon_data[i].CaseLocationDistrict+'</p>\n          </section>\n          <section class="search-result__type">\n            <div class="title">災害類型：</div>\n            <p>'+typhoon_data[i].PName+'</p>\n          </section>\n          <section class="search-result__address">\n            <div class="title">詳細地址：</div>\n            <p>'+typhoon_data[i].CaseLocationDescription+'</p>\n          </section>\n          <section class="search-result__desc">\n            <div class="title">災情描述：</div>\n            <p>'+typhoon_data[i].CaseDescription+'</p>\n          </section>\n          <div class="complete '+(!0===typhoon_data[i].CaseComplete?"yes":"")+'"></div>\n          <i class="fas fa-arrow-up"></i>\n        </article>\n      </div>\n    ';$(".search-result").append(t)}$(window).width()<620?$(window).scrollTop(472):$(window).scrollTop(212)}function common_result(){$(".search-result").empty(),$("button[data-num]").remove(),$(".search-info__summary span").text(typhoon_data.length),setTimeout(function(){for(i=0;i<(typhoon_data.length>everyPage_results?everyPage_results:typhoon_data.length);i++){var t='\n        <div>\n          <article>\n            <section class="search-result__time">\n              <div class="title">發生時間：</div>\n              <p>'+typhoon_data[i].CaseTime.replace("T"," ")+'</p>\n            </section>\n            <section class="search-result__dist">\n              <div class="title">受災地區：</div>\n              <p>'+typhoon_data[i].CaseLocationDistrict+'</p>\n            </section>\n            <section class="search-result__type">\n              <div class="title">災害類型：</div>\n              <p>'+typhoon_data[i].PName+'</p>\n            </section>\n            <section class="search-result__address">\n              <div class="title">詳細地址：</div>\n              <p>'+typhoon_data[i].CaseLocationDescription+'</p>\n            </section>\n            <section class="search-result__desc">\n              <div class="title">災情描述：</div>\n              <p>'+typhoon_data[i].CaseDescription+'</p>\n            </section>\n            <div class="complete '+(!0===typhoon_data[i].CaseComplete?"yes":"")+'"></div>\n            <i class="fas fa-arrow-up"></i>\n          </article>\n        </div>\n      ';$(".search-result").append(t)}for(buttonPage_total=Math.ceil(typhoon_data.length/everyPage_results),buttonPage=0;buttonPage<(buttonPage_add<=buttonPage_total?buttonPage_add:buttonPage_total);buttonPage++){var e='\n<button data-num="'+(buttonPage+1)+'">'+(buttonPage+1)+"</button>\n";$("button.next").before(e),$("button[data-num='1']").addClass("active"),$("button.prev").addClass("disabled"),0===buttonPage_total||1===buttonPage_total?$("button.next").addClass("disabled"):$("button.next").removeClass("disabled")}},100)}function buttonPages_next(){for($("button[data-num]").remove();buttonPage<(buttonPage_total<current_page+buttonPage_add?buttonPage_total:current_page+buttonPage_add);buttonPage++){var t='\n      <button data-num="'+(buttonPage+1)+'">'+(buttonPage+1)+"</button>\n    ";$("button.next").before(t)}$('button[data-num="'+(current_page+1)+'"]').addClass("active"),(click_page=$("button.active").data("num"))===buttonPage_total?$("button.next").addClass("disabled"):$("button.next").removeClass("disabled"),clickPage_result()}function buttonPages_prev(){for($("button[data-num]").remove(),buttonPage=buttonPage===buttonPage_total?buttonPage-(buttonPage_add+buttonPage_total%buttonPage_add):buttonPage-2*buttonPage_add;buttonPage<current_page-1;buttonPage++){var t='\n      <button data-num="'+(buttonPage+1)+'">'+(buttonPage+1)+"</button>\n    ";$("button.next").before(t)}$('button[data-num="'+(current_page-1)+'"]').addClass("active"),click_page=$("button.active").data("num"),clickPage_result()}$.ajax({url:"https://next.json-generator.com/api/json/get/Ek86hdRMr",cache:!1,success:function(t){typhoon_data=typhoon_origin=t,common_result(),initial_selOpt(),$("button[data-num='1']").addClass("active")}}),$(".select__option").on("click","li",function(){$(this).parent().prev().text($(this).text()),$(this).siblings(".active").removeClass("active"),$(this).addClass("active"),$(this).parent().addClass("hide");var e=$(".select__display.dist").text(),a=$(".select__display.type").text(),n=$(".select__display.complete").text();typhoon_data=(typhoon_data=(typhoon_data=typhoon_origin.filter(function(t){return"所有受災地區"!==e?t.CaseLocationDistrict===e:typhoon_origin})).filter(function(t){return"- 請選擇災害類型 -"!==a&&"所有災害類型"!==a?t.PName===a:typhoon_data})).filter(function(t){return"- 請選擇是否完成 -"!==n&&"無"!==n?t.CaseComplete===("已經處理完成"===n):typhoon_data}),common_result()}),$(document).click(function(t){var e=$(t.target).next();e.hasClass("hide")?($(".select__option").addClass("hide"),e.removeClass("hide"),$(".select__display").removeClass("rotate"),$(t.target).addClass("rotate")):($(".select__option").addClass("hide"),$(".select__display").removeClass("rotate"))}),$(".select__option.type, .select__option.complete").one("click","li",function(){$(this).parent().prev().removeClass("placeholder")}),$(".pagination").on("click","button:not(.prev, .next)",function(){current_page=$("button.active").data("num"),click_page=$(this).data("num"),$("button").removeClass("active"),$(this).addClass("active"),1===$(this).data("num")?$("button.prev").addClass("disabled"):$("button.prev").removeClass("disabled"),$(this).data("num")===buttonPage_total?$("button.next").addClass("disabled"):$("button.next").removeClass("disabled"),clickPage_result()}),$("button.prev, button.next").click(function(){if(current_page=$("button.active").data("num"),$(this).hasClass("next")){if(0!==buttonPage_total&&1!==buttonPage_total&&$("button.prev").removeClass("disabled"),current_page===buttonPage_total)return;$("button.active").index()===buttonPage_add?buttonPages_next():($("button.active").removeClass("active").next().addClass("active"),(click_page=$("button.active").data("num"))===buttonPage_total&&$("button.next").addClass("disabled"),clickPage_result())}else if($(this).hasClass("prev")){if(0!==buttonPage_total&&1!==buttonPage_total&&$("button.next").removeClass("disabled"),"1"===$("button.active").text())return;1===$("button.active").index()?buttonPages_prev():($("button.active").removeClass("active").prev().addClass("active"),1===(click_page=$("button.active").data("num"))&&$(this).addClass("disabled"),clickPage_result())}}),$("nav h1:nth-child(1)").click(function(){location=location}),$(".search-result").on("click",".fa-arrow-up",function(){$("html, body").animate({scrollTop:0},400)}),$(".search-info__display .num").click(function(){everyPage_results=$(this).text(),$("span.num").removeClass("active"),$(this).addClass("active"),common_result()});
//# sourceMappingURL=index.js.map
